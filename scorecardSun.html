<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0">
  <title>Player Scorecard | Hackers Cup</title>

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/lucide@latest"></script>

  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            sans: ['Inter', 'sans-serif'],
          },
          colors: {
            hackers: {
              dark: '#0f172a',
              navy: '#1e3a5f',
              sky: '#0ea5e9',
              light: '#38bdf8',
              gold: '#f59e0b',
              surface: '#1e293b',
            }
          }
        }
      }
    }
  </script>

  <style>
    ::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }
    ::-webkit-scrollbar-track {
      background: #0f172a;
    }
    ::-webkit-scrollbar-thumb {
      background: #334155;
      border-radius: 4px;
    }
    ::-webkit-scrollbar-thumb:hover {
      background: #475569;
    }

    .glass {
      background: rgba(30, 41, 59, 0.7);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .glass-card {
      background: rgba(30, 41, 59, 0.6);
      backdrop-filter: blur(16px);
      -webkit-backdrop-filter: blur(16px);
      border: 1px solid rgba(255, 255, 255, 0.08);
    }

    .hero-gradient {
      background: linear-gradient(135deg, #0f172a 0%, #1e3a5f 50%, #0f172a 100%);
    }

    .scorecard-table {
      width: 100%;
      margin: 20px 0;
      border-collapse: collapse;
      font-family: 'Inter', sans-serif;
      color: #ffffff;
      border-radius: 10px;
      overflow: hidden;
      border: 1px solid rgba(148, 163, 184, 0.35);
    }

    .scorecard-total {
      font-size: 9px;
      letter-spacing: 0.28em;
      text-transform: uppercase;
      color: rgba(148, 163, 184, 0.9);
    }

    .scorecard-table thead tr {
      background-color: rgba(30, 41, 59, 0.9);
      text-transform: uppercase;
      letter-spacing: 0.08em;
    }

    .scorecard-table th,
    .scorecard-table td {
      padding: 12px 14px;
      border: 1px solid rgba(148, 163, 184, 0.2);
      text-align: center;
      font-size: 14px;
    }

    .scorecard-table tbody tr:nth-child(even) {
      background-color: rgba(30, 41, 59, 0.45);
    }

    .scorecard-table tbody tr:nth-child(odd) {
      background-color: rgba(15, 23, 42, 0.6);
    }

    .scorecard-table tbody tr:hover {
      background-color: rgba(56, 189, 248, 0.2);
      cursor: pointer;
    }

    .scorecard-shell {
      display: flex;
      flex-direction: column;
      gap: 24px;
    }

    .scorecard-head {
      display: grid;
      gap: 20px;
    }

    .player-card {
      background:
        radial-gradient(120% 140% at 0% 0%, rgba(56, 189, 248, 0.2), transparent 55%),
        radial-gradient(120% 140% at 100% 0%, rgba(14, 165, 233, 0.18), transparent 55%),
        rgba(15, 23, 42, 0.7);
      border-radius: 20px;
      border: 1px solid rgba(255, 255, 255, 0.14);
      padding: 18px 20px;
      display: grid;
      gap: 18px;
    }

    .player-info {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .player-label {
      font-size: 10px;
      letter-spacing: 0.3em;
      text-transform: uppercase;
      color: rgba(148, 163, 184, 0.9);
    }

    .player-top {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
      flex-wrap: wrap;
    }

    .player-name {
      font-size: 24px;
      font-weight: 700;
      color: #ffffff;
    }

    .player-meta {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 6px 10px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.85);
      border: 1px solid rgba(56, 189, 248, 0.25);
    }

    .player-meta-label {
      font-size: 10px;
      letter-spacing: 0.18em;
      text-transform: uppercase;
      color: rgba(148, 163, 184, 0.9);
    }

    .player-meta-value {
      font-size: 14px;
      font-weight: 600;
      color: #ffffff;
    }

    .player-kpis {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 12px;
    }

    .kpi-chip {
      background: rgba(2, 6, 23, 0.55);
      border-radius: 16px;
      border: 1px solid rgba(56, 189, 248, 0.2);
      padding: 12px 14px;
      display: grid;
      gap: 6px;
    }

    .kpi-label {
      font-size: 10px;
      letter-spacing: 0.25em;
      text-transform: uppercase;
      color: rgba(148, 163, 184, 0.9);
    }

    .kpi-value {
      font-size: 24px;
      font-weight: 700;
      color: #ffffff;
    }

    .scorecard-stats {
      background:
        radial-gradient(140% 120% at 0% 0%, rgba(14, 165, 233, 0.18), transparent 55%),
        radial-gradient(140% 120% at 100% 0%, rgba(245, 158, 11, 0.2), transparent 55%),
        rgba(15, 23, 42, 0.6);
      border-radius: 20px;
      border: 1px solid rgba(255, 255, 255, 0.14);
      padding: 20px;
      display: grid;
      gap: 18px;
      box-shadow: 0 18px 50px rgba(2, 6, 23, 0.45);
    }

    .stats-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
    }

    .stats-title {
      font-size: 13px;
      letter-spacing: 0.32em;
      text-transform: uppercase;
      color: transparent;
      background: linear-gradient(90deg, #38bdf8, #f59e0b);
      -webkit-background-clip: text;
      background-clip: text;
    }

    .stats-subtitle {
      font-size: 12px;
      color: rgba(148, 163, 184, 0.9);
    }

    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
      gap: 12px;
    }

    .stats-panel-card {
      --tone: rgba(14, 165, 233, 0.7);
      position: relative;
      background: linear-gradient(145deg, rgba(15, 23, 42, 0.9), rgba(30, 41, 59, 0.6));
      border-radius: 16px;
      border: 1px solid rgba(255, 255, 255, 0.08);
      padding: 12px 14px;
      display: grid;
      gap: 6px;
      overflow: hidden;
      box-shadow: 0 12px 30px rgba(2, 6, 23, 0.35);
    }

    .stats-panel-card::before {
      content: '';
      position: absolute;
      inset: 0 0 auto 0;
      height: 2px;
      background: linear-gradient(90deg, var(--tone), transparent 80%);
    }

    .stats-panel-title {
      font-size: 10px;
      letter-spacing: 0.24em;
      text-transform: uppercase;
      color: rgba(148, 163, 184, 0.85);
    }

    .stats-panel-value {
      font-size: 22px;
      font-weight: 700;
      color: #ffffff;
    }

    .stats-panel-card.tone-sky { --tone: rgba(56, 189, 248, 0.9); }
    .stats-panel-card.tone-emerald { --tone: rgba(16, 185, 129, 0.9); }
    .stats-panel-card.tone-gold { --tone: rgba(245, 158, 11, 0.9); }
    .stats-panel-card.tone-rose { --tone: rgba(244, 63, 94, 0.9); }
    .stats-panel-card.tone-amber { --tone: rgba(251, 146, 60, 0.9); }
    .stats-panel-card.tone-violet { --tone: rgba(168, 85, 247, 0.9); }
    .stats-panel-card.tone-slate { --tone: rgba(148, 163, 184, 0.9); }

    .stats-pill-group {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }

    .stats-pill {
      padding: 6px 12px;
      border-radius: 999px;
      background: linear-gradient(135deg, rgba(15, 23, 42, 0.9), rgba(30, 41, 59, 0.7));
      border: 1px solid rgba(255, 255, 255, 0.12);
      font-size: 12px;
      color: #ffffff;
    }

    .stats-pill-label {
      color: rgba(148, 163, 184, 0.85);
      margin-right: 6px;
      text-transform: uppercase;
      letter-spacing: 0.18em;
      font-size: 9px;
    }

    .stack-lg {
      display: grid;
      gap: 24px;
    }

    .overflow-x-auto {
      overflow-x: visible;
    }

    @media (min-width: 769px) {
      .scorecard-table { table-layout: fixed; }
      .scorecard-table th,
      .scorecard-table td {
        width: 10%; min-width: 60px; max-width: 90px;
        font-size: 14px; padding: 8px 10px; text-align: center;
      }
    }

    @media (min-width: 768px) {
      .scorecard-head {
        grid-template-columns: 1fr;
      }

      .player-card {
        grid-template-columns: minmax(0, 1.2fr) minmax(0, 0.8fr);
        align-items: stretch;
      }
    }
    @media (max-width: 768px) {
      .scorecard-table { table-layout: fixed; }
      .scorecard-table th,
      .scorecard-table td {
        width: 10%;
        min-width: 36px;
        max-width: 64px;
        font-size: 12px;
        padding: 8px 8px;
      }
      .scorecard-table th:last-child,
      .scorecard-table td:last-child {
        width: 10%; min-width: 50px; max-width: 80px;
      }

      .player-name {
        font-size: 22px;
      }

      .kpi-value {
        font-size: 20px;
      }
    }

    .bottom-nav {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: rgba(15, 23, 42, 0.95);
      backdrop-filter: blur(20px);
      border-top: 1px solid rgba(255, 255, 255, 0.1);
      z-index: 50;
      padding-bottom: env(safe-area-inset-bottom);
    }

    .modal-backdrop {
      background: rgba(0, 0, 0, 0.9);
      backdrop-filter: blur(8px);
    }

    .hole-clickable {
      cursor: pointer;
      transition: background-color 0.2s ease;
    }

    .hole-clickable:hover {
      background-color: rgba(56, 189, 248, 0.25);
    }

    @media (min-width: 768px) {
      .bottom-nav {
        display: none;
      }
    }

    .back-link {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 6px 12px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.6);
      border: 1px solid rgba(255, 255, 255, 0.1);
      color: #ffffff;
      font-size: 12px;
      font-weight: 600;
      text-decoration: none;
      transition: background-color 0.2s ease, border-color 0.2s ease;
    }

    .back-link:hover {
      background: rgba(56, 189, 248, 0.15);
      border-color: rgba(56, 189, 248, 0.35);
    }
  </style>
<link rel="manifest" href="site.webmanifest">
</head>
<body class="bg-hackers-dark text-white font-sans antialiased pb-24">
  <nav class="fixed top-0 w-full z-40 glass border-b border-white/10">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex items-center justify-between h-16">
        <div class="flex-shrink-0 flex items-center gap-3">
          <div class="w-10 h-10 rounded-full flex items-center justify-center overflow-hidden bg-hackers-navy">
            <img src="assets/images/logo.png" alt="Hackers Cup Logo" class="w-8 h-8 object-contain" />
          </div>
          <span class="font-bold text-xl tracking-tight">Hackers Cup</span>
        </div>

        <a href="liveSunday.html" class="back-link">
          <i data-lucide="arrow-left" class="w-4 h-4"></i>
          Back to Sunday
        </a>

        <div class="hidden md:flex items-center space-x-1">
          <a href="index.html" class="px-4 py-2 rounded-lg text-sm font-medium text-gray-300 hover:text-white hover:bg-white/10 transition-colors">Home</a>
          <a href="register.html" class="px-4 py-2 rounded-lg text-sm font-medium text-gray-300 hover:text-white hover:bg-white/10 transition-colors">Register</a>
          <a href="venue.html" class="px-4 py-2 rounded-lg text-sm font-medium text-gray-300 hover:text-white hover:bg-white/10 transition-colors">Venue</a>
          <a href="payment.html" class="px-4 py-2 rounded-lg text-sm font-medium text-gray-300 hover:text-white hover:bg-white/10 transition-colors">Payment</a>
          <a href="podcast.html" class="px-4 py-2 rounded-lg text-sm font-medium text-gray-300 hover:text-white hover:bg-white/10 transition-colors">Podcast</a>
          <a href="schedule.html" class="px-4 py-2 rounded-lg text-sm font-medium text-gray-300 hover:text-white hover:bg-white/10 transition-colors">Schedule</a>
          <a href="honour-roll.html" class="px-4 py-2 rounded-lg text-sm font-medium text-gray-300 hover:text-white hover:bg-white/10 transition-colors">Honour Roll</a>
        <a href="notifications-center.html" class="block px-3 py-2 rounded-md text-base font-medium text-gray-300 hover:text-white hover:bg-white/10">Notifications</a>
          <a href="notifications-center.html" class="px-4 py-2 rounded-lg text-sm font-medium text-gray-300 hover:text-white hover:bg-white/10 transition-colors">Notifications</a>
        </div>

        <div class="md:hidden">
          <button onclick="toggleMobileMenu()" class="p-2 rounded-lg text-gray-300 hover:text-white hover:bg-white/10">
            <i data-lucide="menu" class="w-6 h-6"></i>
          </button>
        </div>
      </div>
    </div>

    <div id="mobile-menu" class="hidden md:hidden glass border-t border-white/10">
      <div class="px-4 pt-2 pb-3 space-y-1">
        <a href="index.html" class="block px-3 py-2 rounded-md text-base font-medium text-gray-300 hover:text-white hover:bg-white/10">Home</a>
        <a href="register.html" class="block px-3 py-2 rounded-md text-base font-medium text-gray-300 hover:text-white hover:bg-white/10">Register</a>
        <a href="venue.html" class="block px-3 py-2 rounded-md text-base font-medium text-gray-300 hover:text-white hover:bg-white/10">Venue</a>
        <a href="payment.html" class="block px-3 py-2 rounded-md text-base font-medium text-gray-300 hover:text-white hover:bg-white/10">Payment</a>
        <a href="podcast.html" class="block px-3 py-2 rounded-md text-base font-medium text-gray-300 hover:text-white hover:bg-white/10">Podcast</a>
        <a href="schedule.html" class="block px-3 py-2 rounded-md text-base font-medium text-gray-300 hover:text-white hover:bg-white/10">Schedule</a>
        <a href="honour-roll.html" class="block px-3 py-2 rounded-md text-base font-medium text-gray-300 hover:text-white hover:bg-white/10">Honour Roll</a>
      </div>
    </div>
  </nav>

  <section class="relative pt-24 pb-12 md:pt-32 md:pb-16 overflow-hidden hero-gradient">
    <div class="absolute inset-0 opacity-20">
      <div class="absolute inset-0" style="background-image: radial-gradient(circle at 1px 1px, rgba(255,255,255,0.18) 1px, transparent 0); background-size: 40px 40px;"></div>
    </div>
    <div class="relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="space-y-4">
        <div class="inline-flex items-center gap-2 px-4 py-2 rounded-full glass border border-hackers-sky/30">
          <i data-lucide="clipboard-list" class="w-4 h-4 text-hackers-sky"></i>
          <span class="text-sm font-medium text-gray-300">Ambrose Format</span>
        </div>
        <h1 class="text-4xl md:text-5xl font-bold tracking-tight text-white leading-tight">Sunday Scorecard</h1>
        <p class="text-lg text-gray-300">Hole-by-hole summary with nett and handicap.</p>
      </div>
    </div>
  </section>

  <section class="py-10 md:py-14 -mt-8 relative z-10">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="scorecard-shell">
        <div class="scorecard-head">
          <div class="player-card">
            <div class="player-info">
              <span class="player-label">Player</span>
              <div class="player-top">
                <h2 id="player-name" class="player-name">Player Name</h2>
                <div class="player-meta">
                  <span class="player-meta-label">Handicap</span>
                  <span id="player-handicap" class="player-meta-value">N/A</span>
                </div>
              </div>
            </div>
            <div class="player-kpis">
              <div class="kpi-chip">
                <span class="kpi-label">Nett</span>
                <span id="nett-score" class="kpi-value">0</span>
              </div>
              <div class="kpi-chip">
                <span class="kpi-label">To Par</span>
                <span id="sun-to-par" class="kpi-value">0</span>
              </div>
            </div>
          </div>
        </div>

        <div class="stack-lg">
          <div class="overflow-x-auto">
            <table id="front-nine-table" class="scorecard-table">
              <thead>
                <tr>
                  <th id="h1">1</th><th id="h2">2</th><th id="h3">3</th><th id="h4">4</th><th id="h5">5</th>
                  <th id="h6">6</th><th id="h7">7</th><th id="h8">8</th><th id="h9">9</th><th class="scorecard-total">Out</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td id="par1"></td><td id="par2"></td><td id="par3"></td><td id="par4"></td><td id="par5"></td>
                  <td id="par6"></td><td id="par7"></td><td id="par8"></td><td id="par9"></td><td id="parOut"></td>
                </tr>
                <tr>
                  <td id="score1"></td><td id="score2"></td><td id="score3"></td><td id="score4"></td><td id="score5"></td>
                  <td id="score6"></td><td id="score7"></td><td id="score8"></td><td id="score9"></td><td id="scoreOut"></td>
                </tr>
              </tbody>
            </table>
          </div>

          <div class="overflow-x-auto">
            <table id="back-nine-table" class="scorecard-table">
              <thead>
                <tr>
                  <th id="h10">10</th><th id="h11">11</th><th id="h12">12</th><th id="h13">13</th><th id="h14">14</th>
                  <th id="h15">15</th><th id="h16">16</th><th id="h17">17</th><th id="h18">18</th><th class="scorecard-total">In</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td id="par10"></td><td id="par11"></td><td id="par12"></td><td id="par13"></td><td id="par14"></td>
                  <td id="par15"></td><td id="par16"></td><td id="par17"></td><td id="par18"></td><td id="parIn"></td>
                </tr>
                <tr>
                  <td id="score10"></td><td id="score11"></td><td id="score12"></td><td id="score13"></td><td id="score14"></td>
                  <td id="score15"></td><td id="score16"></td><td id="score17"></td><td id="score18"></td><td id="scoreIn"></td>
                </tr>
              </tbody>
            </table>
          </div>

          <div class="scorecard-stats">
            <div class="stats-header">
              <div class="stats-title">Ryzy Performance Pulse</div>
           
            </div>
            <div class="stats-grid">
              <div class="stats-panel-card tone-sky">
                <div class="stats-panel-title">Eagles</div>
                <div id="stat-eagles" class="stats-panel-value">0</div>
              </div>
              <div class="stats-panel-card tone-emerald">
                <div class="stats-panel-title">Birdies</div>
                <div id="stat-birdies" class="stats-panel-value">0</div>
              </div>
              <div class="stats-panel-card tone-gold">
                <div class="stats-panel-title">Pars</div>
                <div id="stat-pars" class="stats-panel-value">0</div>
              </div>
              <div class="stats-panel-card tone-rose">
                <div class="stats-panel-title">Bogeys</div>
                <div id="stat-bogeys" class="stats-panel-value">0</div>
              </div>
              <div class="stats-panel-card tone-amber">
                <div class="stats-panel-title">Double+</div>
                <div id="stat-double" class="stats-panel-value">0</div>
              </div>
              <div class="stats-panel-card tone-violet">
                <div class="stats-panel-title">Avg Score</div>
                <div id="stat-avg-score" class="stats-panel-value">0.0</div>
              </div>
            </div>
            <div class="stats-pill-group">
              <div class="stats-pill"><span class="stats-pill-label">To Par</span><span id="stat-to-par">0</span></div>
              <div class="stats-pill"><span class="stats-pill-label">Birdie-</span><span id="stat-birdie-plus">0</span></div>
              <div class="stats-pill"><span class="stats-pill-label">Bogey+</span><span id="stat-bogey-plus">0</span></div>
            </div>
            <div class="stats-grid">
              <div class="stats-panel-card tone-slate">
                <div class="stats-panel-title">Best Holes</div>
                <div id="stat-best-holes" class="stats-panel-value">--</div>
              </div>
              <div class="stats-panel-card tone-slate">
                <div class="stats-panel-title">Worst Holes</div>
                <div id="stat-worst-holes" class="stats-panel-value">--</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <div class="bottom-nav md:hidden">
    <div class="flex justify-around items-center h-16 pb-safe">
      <a href="index.html" class="flex flex-col items-center justify-center w-full h-full text-gray-400 hover:text-white">
        <i data-lucide="home" class="w-6 h-6 mb-1"></i>
        <span class="text-[10px] font-medium">Home</span>
      </a>
      <a href="payment.html" class="flex flex-col items-center justify-center w-full h-full text-gray-400 hover:text-white">
        <i data-lucide="credit-card" class="w-6 h-6 mb-1"></i>
        <span class="text-[10px] font-medium">Payment</span>
      </a>
      <a href="podcast.html" class="flex flex-col items-center justify-center w-full h-full text-gray-400 hover:text-white">
        <i data-lucide="mic" class="w-6 h-6 mb-1"></i>
        <span class="text-[10px] font-medium">Podcast</span>
      </a>
      <a href="score.html" class="flex flex-col items-center justify-center w-full h-full text-gray-400 hover:text-white">
        <i data-lucide="trending-up" class="w-6 h-6 mb-1"></i>
        <span class="text-[10px] font-medium">Score</span>
      </a>
    </div>
  </div>

  <div id="holeModal" class="fixed inset-0 z-[60] hidden modal-backdrop flex items-center justify-center p-4">
    <div class="relative w-full max-w-5xl bg-black rounded-2xl overflow-hidden shadow-2xl border border-white/10">
      <button onclick="closeHoleModal()" class="absolute top-4 right-4 z-10 w-10 h-10 rounded-full bg-black/50 hover:bg-black/80 flex items-center justify-center text-white transition-colors">
        <i data-lucide="x" class="w-6 h-6"></i>
      </button>
      <div class="grid md:grid-cols-2 gap-0 bg-hackers-dark">
        <div id="holeModalVideoWrap" class="bg-black">
          <video id="holeModalVideo" controls class="w-full aspect-video" playsinline>
            <source src="" type="video/mp4">
            Your browser does not support the video tag.
          </video>
        </div>
        <div class="p-6 space-y-4">
          <div class="flex items-center justify-between">
            <h3 id="holeModalTitle" class="text-2xl font-semibold text-white">Hole</h3>
          </div>
          <div class="flex items-center gap-4 text-sm text-gray-300">
            <div class="flex items-center gap-1">
              <i data-lucide="ruler" class="w-4 h-4"></i>
              <span id="holeModalMeters">--</span>
            </div>
            <div class="flex items-center gap-1">
              <i data-lucide="move-horizontal" class="w-4 h-4"></i>
              <span id="holeModalYards">--</span>
            </div>
          </div>
          <div class="flex flex-wrap items-center gap-2 text-xs text-gray-300">
            <span id="holeModalPar" class="px-3 py-1 rounded-full bg-hackers-sky/20 text-hackers-sky text-xs font-semibold border border-hackers-sky/20">Par</span>
            <span id="holeModalIndex1" class="px-2 py-1 rounded-full bg-white/10 border border-white/10">Index 1: --</span>
            <span id="holeModalIndex2" class="px-2 py-1 rounded-full bg-white/10 border border-white/10">Index 2: --</span>
          </div>
          <p id="holeModalNote" class="text-sm text-gray-300"></p>
          <p id="holeModalNoVideo" class="text-sm text-gray-500 hidden">Flyover coming soon.</p>
        </div>
      </div>
    </div>
  </div>

  <script>
    function toggleMobileMenu() {
      const menu = document.getElementById('mobile-menu');
      menu.classList.toggle('hidden');
    }

    document.addEventListener('DOMContentLoaded', () => {
      if (window.lucide) {
        window.lucide.createIcons();
      }
    });
  </script>

  <script>
    // ---- Config / Name handling
    const urlParams = new URLSearchParams(window.location.search);
    const playerNameRaw = urlParams.get('player') || "Unknown Player";
    const playerNameDisplay = playerNameRaw.replace(/-/g, ' & ');
    document.getElementById('player-name').textContent = playerNameDisplay;


    const sheetId = '13shk7MzhCOUCoIFy7OabZBI5X36TpYMr7c_LwEk22BI';

    // Custom display order:
    const displayOrder = [1, 2, 3, 4, 5, 6, 7, 8, 24, 25, 9, 19, 20, 21, 17, 18, 10, 27];

    const baseUrl = 'https://worrigeelinks.com.au/wp-content/uploads/2025/06/';
    const holeDetails = {
      1: { num: 1, par: 5, dist: 468, yards: 473, index1: 10, index2: 23, video: 'hole_1-1080p.mp4',
        note: "The opening hole at Worrigee Links is a relatively short par 5 with little trouble and a good opportunity to start with a birdie. A straight drive to the right of the fairway bunkers will set up an approachable second shot. Like most holes at Worrigee Links, the best place to miss is short of the green for an easy chip to a long, flat, narrow putting surface. Avoid missing pin-high due to rough lies and little green to work with."
      },
      2: { num: 2, par: 3, dist: 202, yards: 210, index1: 1, index2: 26, video: 'hole_2-1080p.mp4',
        note: "The second hole is a long par 3 and rated the hardest hole on the course for good reason. Avoid the water hazard down the left side. The ideal tee shot here, if you miss the green, is just short, which leaves an easy chip to an uphill sloping green. Par on this hole is always a great score."
      },
      3: { num: 3, par: 4, dist: 324, yards: 330, index1: 12, index2: 29, video: 'hole_3-1080p.mp4',
        note: "The third hole is a slight dogleg left, a strong par 4. A good drive right of the fairway bunker will leave a shorter approach. Two bunkers sit left of the green, but otherwise a reasonably straightaway hole with a long, undulating green."
      },
      4: { num: 4, par: 4, dist: 279, yards: 292, index1: 16, index2: 32, video: 'hole_4-1080p-1.mp4' },
      5: { num: 5, par: 4, dist: 370, yards: 360, index1: 3, index2: 21, video: 'hole_5-1080p.mp4',
        note: "The fifth is a long par 4 and the key here is a good straight drive. Avoid the out of bounds all down the left side and the cluster of trees down the right side. A mid-to-short iron second shot should find a large green with bunkers left and right."
      },
      6: { num: 6, par: 3, dist: 162, yards: 165, index1: 15, index2: 36, video: 'hole_6-1080p.mp4',
        note: "The sixth hole is a tough par 3, with out of bounds to the left and right. Three bunkers surround a large green, one short left and two on the right. The tee shot can be deceiving. Most come up just short, which is desirable and leaves an easy chip."
      },
      7: { num: 7, par: 5, dist: 478, yards: 497, index1: 6, index2: 19, video: 'hole_7-1080p.mp4',
        note: "Par 5, the seventh is the signature hole at Worrigee Links. The tee shot from the tee presents a spectacular view on this dogleg left hole with out of bounds all the way down the left side. Aim for the bunkers in the distance, where a nice straight drive over the water will set you up well for your second shot. Always keep left with your approach into a long, narrow green. This is a three-shot par 5, which should be played conservatively. The green is too long and narrow to attempt going for it. Play smart, stay left of the bunkers with your approach shot, which will give you a great angle to the green."
      },
      8: { num: 8, par: 3, dist: 157, yards: 160, index1: 8, index2: 31, video: 'hole_8-1080p.mp4',
        note: "The par 3 eighth hole is guarded by greenside bunkers. If you miss the green, short is the most desirable position for an easy chip to a very large, narrow green. Avoid missing pin-high either side as you will have very little green to work with."
      },
      9: { num: 9, par: 4, dist: 346, yards: 350, index1: 4, index2: 20, video: 'hole_9-1080p.mp4',
        note: "The par 4 ninth requires a layup short of the water hazard for the long hitters, 250 meters to the water from the tee. The water hazard continues up the right side, but otherwise a straightforward approach shot to an uphill sloping green with bunkers left and right. Miss short for an easy chip up the slope. Avoid missing pin-high or face a very difficult sloping chip shot."
      },
      10: { num: 10, par: 4, dist: 335, yards: 335, index1: 7, index2: 22, video: 'hole_10-1080p.mp4',
        note: "The 10th hole is a dogleg right par 4. Aim for the pine trees on the left side with your tee shot, avoiding the right-hand fairway bunkers. This will leave you with a nice approach shot to a very long, narrow green with one bunker on the left side. Avoid missing right, which leaves a very difficult chip shot."
      },
      11: { num: 11, par: 5, dist: 444, yards: 444, index1: 11, index2: 30, video: 'hole_11-1080p.mp4',
        note: "The par 5 11th hole presents itself as a very real birdie opportunity. With little trouble off the tee, the longer hitters will reach the green in two. Avoid missing the green right as you will face a tough downhill chip shot. Short left is the ideal miss for an easy chip to this uphill sloping green."
      },
      12: { num: 12, par: 3, dist: 185, yards: 185, index1: 2, index2: 27, video: 'hole_12-1080p.mp4',
        note: "The 12th hole is a long par 3 with out of bounds all down the left side. There is a bunker short right and another long left. The best place to miss this green is just short for an easy chip shot to a long, narrow, undulating green."
      },
      13: { num: 13, par: 4, dist: 280, yards: 280, index1: 17, index2: 33, video: 'hole_13-1080p-1.mp4' },
      14: { num: 14, par: 3, dist: 175, yards: 175, index1: 5, index2: 25, video: 'hole_14-1080p.mp4',
        note: "The 14th hole looks straightforward, but there is a water hazard lurking down the right side and out of bounds to the left. The ideal tee shot, if you miss the green, is just short, leaving a simple chip to a long flat green. Avoid missing pin-high right with little green to work with and a greenside bunker left."
      },
      15: { num: 15, par: 4, dist: 242, yards: 242, index1: 18, index2: 34, video: 'hole_15-1080p.mp4',
        note: "The short, powerful 15th hole is rated the easiest hole on the course. The long hitters will drive the green if they can fly the two well-positioned bunkers. The water hazard to the right creates a good visual, but isn't really in play as the fairway doglegs from left to right, so there's plenty of room to the left. Massive green and a good birdie opportunity."
      },
      16: { num: 16, par: 4, dist: 350, yards: 350, index1: 9, index2: 24, video: 'hole_16-1080p.mp4',
        note: "The 16th is a long dogleg left, powerful hole. No real problems other than keeping your drive to the right of the fairway bunker, for a good approach shot into a big flat green with two bunkers to the left and one to the right. There are two big grassy mounds to avoid on the right side of the fairway."
      },
      17: { num: 17, par: 3, dist: 132, yards: 132, index1: 13, index2: 35, video: 'hole_17-1080p.mp4',
        note: "The 17th hole is a short par 3 with a palm tree to the left and bunkers surrounding the green. Out of bounds right, but should be a relatively easy tee shot. The wind can be a factor with club selection. If you miss the green, best to come up just short for an easy chip up to a sloping green."
      },
      18: { num: 18, par: 5, dist: 445, yards: 445, index1: 14, index2: 28, video: 'hole_18-1080p.mp4',
        note: "The 18th is a good par 5 finishing hole. Not much trouble other than a few fairway bunkers on the left, but otherwise fine. Avoid the grassy mound short left of the green, and bunkers either side. The long, narrow green is best approached by landing just short for an easy chip and a great opportunity to finish your round well."
      }
    };

    function bindHoleColumnClicks(tableId, order) {
      const table = document.getElementById(tableId);
      if (!table) return;
      const headers = table.querySelectorAll('thead th');
      const rows = table.querySelectorAll('tbody tr');

      const makeClickable = (cell, holeNumber) => {
        if (!cell) return;
        cell.classList.add('hole-clickable');
        cell.addEventListener('click', () => openHoleModal(holeNumber));
      };

      order.forEach((holeNumber, index) => {
        makeClickable(headers[index], holeNumber);
        rows.forEach(row => {
          makeClickable(row.children[index], holeNumber);
        });
      });
    }

    function openHoleModal(holeNumber) {
      const modal = document.getElementById('holeModal');
      const video = document.getElementById('holeModalVideo');
      const source = video.querySelector('source');
      const videoWrap = document.getElementById('holeModalVideoWrap');
      const noVideo = document.getElementById('holeModalNoVideo');
      const hole = holeDetails[holeNumber];

      document.getElementById('holeModalTitle').textContent = `Hole ${holeNumber}`;
      document.getElementById('holeModalPar').textContent = hole && hole.par ? `Par ${hole.par}` : 'Par -';
      document.getElementById('holeModalMeters').textContent = hole && hole.dist ? `${hole.dist}m` : '--';
      document.getElementById('holeModalYards').textContent = hole && hole.yards ? `${hole.yards} yd` : '--';
      document.getElementById('holeModalIndex1').textContent = hole && hole.index1 ? `Index 1: ${hole.index1}` : 'Index 1: --';
      document.getElementById('holeModalIndex2').textContent = hole && hole.index2 ? `Index 2: ${hole.index2}` : 'Index 2: --';
      document.getElementById('holeModalNote').textContent = hole && hole.note ? hole.note : 'Transcript coming soon.';

      if (hole && hole.video) {
        source.src = baseUrl + hole.video;
        video.load();
        videoWrap.classList.remove('hidden');
        noVideo.classList.add('hidden');
        video.play().catch(() => {});
      } else {
        source.src = '';
        video.load();
        video.pause();
        videoWrap.classList.add('hidden');
        noVideo.classList.remove('hidden');
      }

      modal.classList.remove('hidden');
      document.body.style.overflow = 'hidden';
    }

    function closeHoleModal() {
      const modal = document.getElementById('holeModal');
      const video = document.getElementById('holeModalVideo');
      const source = video.querySelector('source');
      video.pause();
      source.src = '';
      video.load();
      modal.classList.add('hidden');
      document.body.style.overflow = '';
    }

    // Set table headers to real hole numbers
    (function setHoleHeaders() {
      for (let i = 0; i < 18; i++) {
        const th = document.getElementById('h' + (i + 1));
        if (th) th.textContent = displayOrder[i];
      }
    })();

    bindHoleColumnClicks('front-nine-table', displayOrder.slice(0, 9));
    bindHoleColumnClicks('back-nine-table', displayOrder.slice(9));

    document.getElementById('holeModal')?.addEventListener('click', (e) => {
      if (e.target === e.currentTarget) {
        closeHoleModal();
      }
    });

    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') {
        closeHoleModal();
      }
    });

    // ---- Fetch the player's sheet (by sheet name) for pars/scores
    const playerSheetUrl =
      `https://docs.google.com/spreadsheets/d/${sheetId}/gviz/tq?tqx=out:json&sheet=${encodeURIComponent(playerNameRaw)}`;

    fetch(playerSheetUrl)
      .then(response => response.text())
      .then(data => {
        const json = JSON.parse(data.match(/google\.visualization\.Query\.setResponse\((.*)\);/)[1]);
        const rows = json.table.rows || [];

        const scoresByHole = {};
        const parsByHole = {};

        // rows are in same order as displayOrder
        for (let i = 0; i < displayOrder.length; i++) {
          const holeNumber = displayOrder[i];
          const row = rows[i] && rows[i].c ? rows[i].c : [];
          const scoreVal = row[8] && row[8].v != null ? parseInt(row[8].v, 10) : 0; // I
          const parVal   = row[5] && row[5].v != null ? parseInt(row[5].v, 10) : 0; // F
          scoresByHole[holeNumber] = isNaN(scoreVal) ? 0 : scoreVal;
          parsByHole[holeNumber]   = isNaN(parVal) ? 0 : parVal;
        }

        // Fill Out/In using the mapped order
        let outParSum = 0, inParSum = 0, outScoreSum = 0, inScoreSum = 0;

        for (let i = 0; i < 9; i++) {
          const pos = i + 1; // 1..9
          const holeNumber = displayOrder[i];
          const par = parsByHole[holeNumber] || 0;
          const scr = scoresByHole[holeNumber] || 0;

          document.getElementById(`par${pos}`).textContent = par;
          const td = document.getElementById(`score${pos}`);
          td.textContent = scr;
          colorScoreCell(holeNumber, td, parsByHole, scoresByHole);

          outParSum += par;
          outScoreSum += scr;
        }
        document.getElementById('parOut').textContent = outParSum;
        document.getElementById('scoreOut').textContent = outScoreSum;

        for (let i = 9; i < 18; i++) {
          const pos = i + 1; // 10..18
          const holeNumber = displayOrder[i];
          const par = parsByHole[holeNumber] || 0;
          const scr = scoresByHole[holeNumber] || 0;

          document.getElementById(`par${pos}`).textContent = par;
          const td = document.getElementById(`score${pos}`);
          td.textContent = scr;
          colorScoreCell(holeNumber, td, parsByHole, scoresByHole);

          inParSum += par;
          inScoreSum += scr;
        }
        document.getElementById('parIn').textContent = inParSum;
        document.getElementById('scoreIn').textContent = inScoreSum;

        const totalDiff = (outScoreSum + inScoreSum) - (outParSum + inParSum);
        const toParEl = document.getElementById('sun-to-par');
        if (toParEl) {
          toParEl.textContent = totalDiff > 0 ? `+${totalDiff}` : `${totalDiff}`;
        }

        const holeStats = displayOrder.map(holeNumber => {
          const par = parsByHole[holeNumber] || 0;
          const scr = scoresByHole[holeNumber] || 0;
          return { hole: holeNumber, par, scr, diff: scr - par };
        }).filter(h => h.par > 0);

        const countBy = predicate => holeStats.filter(predicate).length;
        const eagles = countBy(h => h.diff === -2);
        const birdies = countBy(h => h.diff === -1);
        const pars = countBy(h => h.diff === 0);
        const bogeys = countBy(h => h.diff === 1);
        const doublePlus = countBy(h => h.diff >= 2);
        const birdiePlus = countBy(h => h.diff <= -1);
        const bogeyPlus = countBy(h => h.diff >= 1);
        const avgScore = holeStats.length
          ? (holeStats.reduce((sum, h) => sum + h.scr, 0) / holeStats.length).toFixed(1)
          : '0.0';

        const bestHoles = [...holeStats]
          .sort((a, b) => a.diff - b.diff || a.hole - b.hole)
          .slice(0, 3)
          .map(h => `H${h.hole}`)
          .join(', ') || '--';

        const worstHoles = [...holeStats]
          .sort((a, b) => b.diff - a.diff || a.hole - b.hole)
          .slice(0, 3)
          .map(h => `H${h.hole}`)
          .join(', ') || '--';

        const setStat = (id, value) => {
          const el = document.getElementById(id);
          if (el) el.textContent = value;
        };

        setStat('stat-eagles', eagles);
        setStat('stat-birdies', birdies);
        setStat('stat-pars', pars);
        setStat('stat-bogeys', bogeys);
        setStat('stat-double', doublePlus);
        setStat('stat-avg-score', avgScore);
        setStat('stat-to-par', totalDiff > 0 ? `+${totalDiff}` : `${totalDiff}`);
        setStat('stat-birdie-plus', birdiePlus);
        setStat('stat-bogey-plus', bogeyPlus);
        setStat('stat-best-holes', bestHoles);
        setStat('stat-worst-holes', worstHoles);

        // Color by relation to par
        function colorScoreCell(holeNumber, cell, pars, scores) {
          const par = pars[holeNumber] || 0;
          const scr = scores[holeNumber] || 0;
          const diff = scr - par;
          cell.style.backgroundColor = "";
          cell.style.color = "";
          if (!par) return;
          if (diff === 0) { cell.style.backgroundColor = "white"; cell.style.color = "black"; }
          else if (diff === -1) { cell.style.backgroundColor = "#add8e6"; cell.style.color = "black"; }
          else if (diff === -2) { cell.style.backgroundColor = "blue"; cell.style.color = "white"; }
          else if (diff === -3) { cell.style.backgroundColor = "navy"; cell.style.color = "white"; }
          else if (diff === 1) { cell.style.backgroundColor = "orange"; cell.style.color = "black"; }
          else if (diff >= 2) { cell.style.backgroundColor = "red"; cell.style.color = "white"; }
        }
      })
      .catch(error => console.error('Error fetching player sheet:', error));

    // ---- Handicap + Nett fetch from gid=1198498112 (C = name, F = handicap, G = nett)
    const handicapGid = '1198498112';
    const handicapUrl =
      `https://docs.google.com/spreadsheets/d/${sheetId}/gviz/tq?tqx=out:json&gid=${handicapGid}`;

    fetch(handicapUrl)
      .then(response => response.text())
      .then(data => {
        const json = JSON.parse(data.match(/google\.visualization\.Query\.setResponse\((.*)\);/)[1]);
        const rows = json.table.rows || [];
        let handicap = "N/A";
        let nett = "0";

        rows.some(r => {
          if (!r.c) return false;
          const nameCell = r.c[2] && r.c[2].v ? r.c[2].v : "";
          const norm = String(nameCell).trim().toLowerCase();
         if (norm === playerNameRaw.trim().toLowerCase()) {
            // F = index 5, G = index 6
            if (r.c[5] && r.c[5].v != null) handicap = r.c[5].v;
            if (r.c[6] && r.c[6].v != null) nett = r.c[6].v;
            return true; // stop on first match
          }
          return false;
        });

        document.getElementById("player-handicap").textContent = handicap;
        document.getElementById("nett-score").textContent = nett;
      })
      .catch(error => console.error("Error fetching handicap/nett data:", error));
  </script>
</body>
</html>
